% derivation_scenegraph.tex
% Full derivation of the scene-graph update rule (placeholder)

\subsubsection*{Goal}
Show that a variational update of the latent scene graph
\[
  \mathbf{z} \leftarrow \mathbf{z} + \eta\;\Sigma_z
  \frac{\partial F}{\partial \mathbf{z}}
\]
reduces the free energy \(F\) under the linearised generative model.

\subsubsection*{Sketch}
\begin{enumerate}
  \item Write Taylor expansion of \(F(\mathbf{z}+\Delta\mathbf{z})\).
  \item Substitute the natural-gradient step \(\Delta\mathbf{z}=-\eta\;\Sigma_z\nabla_{\mathbf{z}}F\).
  \item Show that the first-order term cancels the quadratic increase
        when \(0<\eta\le 1\).
\end{enumerate}

\subsubsection*{Result}
\[
  F(\mathbf{z}_{t+1})-F(\mathbf{z}_{t})
  \;\approx\;
  -\,\eta\,
  \Bigl\lVert \Sigma_z^{\;1/2}\nabla_{\mathbf{z}}F \Bigr\rVert^{2}
  \;\le 0
\]

\noindent
Hence each update monotically lowers the variational free energy,
proving the correctness of the scene-graph rule.

